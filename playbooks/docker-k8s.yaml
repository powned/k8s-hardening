---
- hosts: all
  remote_user: "{{ user  }}"
  become: yes
  vars_files:
    - "../vars/docker.yaml"
    - "../vars/k8s.yaml"
    - "../vars/host-config.yaml"
  tasks:
    - name: Configure all machines
      include: ../tasks/configure-hosts.yaml

    - name: Provision and benchmark Docker and Kubernetes
      include: ../tasks/main.yaml

    - name: Clear packages on all machines
      include: ../tasks/autoremove.yaml
